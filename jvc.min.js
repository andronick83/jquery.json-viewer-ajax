/*! jQuery JVC | https://github.com/andronick83/jquery.json-viewer-callback */
var JVC={};JVC.isUrl=e=>{try{let o=new URL(e);return"http:"===o.protocol||"https:"===o.protocol}catch(t){return!1}},JVC.objDiff=(e,o)=>{var t={};for(let[a,r]of Object.entries(e))a in o&&r!==o[a]&&(t[a]=o[a]);return t},JVC.tabWidth=e=>{var o=$("<span style=overflow:visible>").append(e.tab.repeat(100)).appendTo(".jvc"),t=o.width()/100;return o.remove(),t},JVC.htmlEscape=e=>e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&apos;").replace(/"/g,"&quot;"),JVC.setStyle=e=>{if("jvc-default"==e)var o=$("<style>").append(JVC.style);else{JVC.isUrl(e)||(e="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/"+e+".min.css");var o=$("<link rel=stylesheet>").attr("href",e)}o.appendTo("head"),setTimeout(function(){$(".jvc-style").remove(),o.addClass("jvc-style")},100)},JVC.defs={key:void 0,invertColors:!1,withLinks:!0,bigNumbers:!1,withQuotes:!1,commentSelect:!1,tab:"	",collapsed:!1,showConf:!1,showJSON:!1,debug:console.debug,error:console.error,callback:null,onChange:null},JVC.style=".hljs{background-color:#293134;color:#e0e2e4}.hljs-keyword{color:#93c763;font-style:normal}.hljs-number{color:#ffcd22}.hljs-string{color:#ec7600}.hljs-title{color:#dcdcaa;font-style:normal}.hljs-comment{color:#343f43;font-style:italic}.hljs-comment:hover{color:#818e96}.hljs-attr{color:#678cb1}",function(e){function o(e,o,t=null){return e.$list.hide(),setTimeout(()=>{e.$list.show(),t&&t(e,o)},0),!1}function t(){return e("<span class=hljs-punctuation>")}function a(o=""){return e("<span class=jvc-space>").append(o)}function r(){return e('<span class=jvc-quote>"</span>')}function s(){return e("<span class=jvc-list>")}function l(o,l,n){var c={};c.$root=e("<span class=jvc-item>").addClass("jvc-level-"+l).data("dom",c).data("level",l),c.$property=e("<span class=hljs-attr>");var d="";c.$value=e("<span class=jvc-value>"),c.$braceStart=t(),c.$placeholder=e("<span class=hljs-comment>"),c.$list=s(),c.$braceEnd=c.$braceStart.clone();var p=a("\n").addClass("jvc-br"),i=a().addClass("jvc-tabs");n.tab&&l&&i.append(n.tab.repeat(l));var v=t().addClass("jvc-comma").append(",");return void 0!==o&&(c.$property.append(JVC.htmlEscape(JSON.stringify(o).slice(1,-1))),d=t(),l?(c.$property.prepend(r).append(r),d.append(":",a(" "))):d.append(a(" "),"=",a(" ")),"jvc-fail"===o&&c.$value.addClass("jvc-fail")),c.$root.append(i,c.$property,d,c.$value,c.$braceStart,v,c.$placeholder,p,c.$list,e("<span class=jvc-suffix>").append(i.clone(),c.$braceEnd,v.clone(),p.clone())),c}function n(e,o,t){return e[t="$"+t].replaceWith(o[t]),e[t]=o[t],e}function c(e,o,t){return e.$value.addClass("hljs-"+t).append(o),e}function d(e,o,t=!1){return e.$braceStart.append(o),!1!==t&&e.$braceEnd.append(t),e}function p(e,o,t){return t.commentSelect&&(o="/* "+o+" */"),e.$placeholder.append(" "+o+" "),e}function i(o,t,a,r){return function o(t,a,r,s){if("string"==typeof a){var n,v,j,u,f,b,g,h,C,m,y=JVC.htmlEscape(JSON.stringify(a).slice(1,-1));return s.withLinks&&JVC.isUrl(a)&&(y=e("<a target=_blank>").attr("href",a).append(y).prop("outerHTML")),c(t,'"'+y+'"',"string")}return null===a||"boolean"==typeof a?c(t,JSON.stringify(a),"keyword"):void 0===a?c(t,"undefined","keyword"):"number"==typeof a||"bigint"==typeof a?c(t,a,"number"):a instanceof Array?function e(o,t,a,r){var s=t.length;if(!s)return d(o,"[]"),o;o.$root.addClass("jvc-toggle"),r.collapsed&&("number"!=typeof r.collapsed||r.collapsed<=a)&&o.$root.addClass("jvc-collapsed"),d(o,"[","]"),p(o,s+(s>1?" items":" item"),r);for(var l=0;l<s;++l){var n=i(void 0,t[l],a+1,r);o.$list.append(n.$root)}return o}(t,a,r,s):"object"==typeof a&&s.bigNumbers&&("function"==typeof a.toExponential||a.isLosslessNumber)?c(t,a.toString(),"number"):"object"==typeof a&&"jvc-cb"in a?(n=t,v=a,u=s,n.$root.addClass("jvc-toggle jvc-collapsed jvc-callback jvc-no-obj").data("jvc-cb",v["jvc-cb"]),c(n,"null","keyword"),p(n,"jvc-cb: "+JSON.stringify(v["jvc-cb"]),u),n):"object"==typeof a?function e(o,t,a,r){var s=Object.keys(t).length;if(!s)return d(o,"{}"),o;for(var n in o.$root.addClass("jvc-toggle"),r.collapsed&&("number"!=typeof r.collapsed||r.collapsed<=a)&&o.$root.addClass("jvc-collapsed"),d(o,"{","}"),p(o,s+(s>1?" items":" item"),r),t){if(Object.prototype.hasOwnProperty.call(t,n))var v=i(n,t[n],a+1,r);else{r.error&&r.error("domSetObj","JSON-VAL-FAIL-KEY",t+"",n+"");var v=l(n.toString(),a+1,r);c(v,"JSON-VAL-FAIL-KEY: "+typeof t+' "'+n.toString()+'"',"string").addClass("jvc-fail")}o.$list.append(v.$root)}return o}(t,a,r,s):"function"==typeof a?(f=t,b=a,g=r,h=s,f.$root.addClass("jvc-toggle jvc-collapsed jvc-function"),c(f,(C=(b+"").match(/^\s*([^{]+){(.*)}$/))[1].replaceAll(/(^\s+|\s+$)/g,""),"title"),d(f,"{","}"),p(f,"hidden",h),m=i("content",C[2],g+1,h),h.debug&&h.debug("domSetFunc",b,m),f.$list.append(m),f):(s.error&&s.error("domSet","JSON-VAL-FAIL-TYPE:",typeof a,a),c(t,"JSON-VAL-FAIL-TYPE: "+typeof a+' "'+a.toString()+'"',"string").addClass("jvc-fail"))}(l(o,a,r),t,a,r)}function v(e,o){return(!!o.onChange||!!o.showJSON)&&(setTimeout(function(){var t=e.$root.closest(".jvc"),a=e.$root.closest(".jvc-root-list").clone().addClass("jvc-tabs").appendTo(t);a.find(":hidden,.hljs-comment").remove(),json=a.text(),a.remove(),o.showJSON&&t.find(".jvc-log.jvc-json").empty().append("// Logs:\n").append(JVC.htmlEscape(json)),"function"==typeof o.onChange&&o.onChange(e.$root[0],json),t.trigger("change",[e.$root[0],json])},0),!1)}e.fn.JVC=function(t,a){var r=Object.assign({},JVC.defs,a);return r.debug&&r.debug("JVC",{obj:t,options:r}),e(".jvc-style").length||JVC.setStyle("jvc-default"),this.each(function(){var l=e('<div class="jvc hljs">').appendTo(e(this).empty()).data("options",r);r.withQuotes||l.addClass("jvc-no-quotes"),r.invertColors&&l.addClass("jvc-invert"),r.commentSelect||l.addClass("jvc-comment-no-select"),r.showConf&&l.prepend(e("<span class=jvc-log jvc-conf>").append("// Conf: "+JSON.stringify(JVC.objDiff(JVC.defs,a))));var c=i(r.key,t,0,r);l.append(s().addClass("jvc-root-list").append(c.$root)),v(c,r),r.showJSON&&l.append(e('<span class="jvc-log jvc-json">')),l.off("click").on("click",".jvc-toggle>:not(.jvc-list)",function(){var t=e(this).closest(".jvc-toggle").data("dom"),a=t.$root.data("jvc-cb");if(void 0===a||!1===a)return t.$root.toggleClass("jvc-collapsed"),o(t,r,v);if(!t.$root.hasClass("jvc-collapsed"))return t.$root.addClass("jvc-collapsed"),t.$braceEnd.is(":empty")?t.$root.addClass("jvc-no-obj"):t.$root.removeClass("jvc-no-obj"),o(t,r,v);var s=t.$root.data("level");return r.callback?(t.$root.addClass("jvc-loading"),r.callback(a,function(e){var a,l,c,d,p;a=t,l=e,c=s,d=r,p=i(void 0,l,c,d),d.debug&&d.debug("objCb",l,c,p,d),p.$root.hasClass("jvc-toggle")?a.$root.removeClass("jvc-collapsed"):a.$root.addClass("jvc-collapsed"),n(a,p,"value"),n(a,p,"braceStart"),n(a,p,"braceEnd"),a.$braceEnd.is(":empty")?a.$root.addClass("jvc-no-obj"):a.$root.removeClass("jvc-no-obj"),n(a,p,"list"),a.$root.removeClass("jvc-loading"),o(a,d,v)}),v(t,r)):(r.error&&r.error("JVC","OPTIONS-CALLBACK-EMPTY:",r.callback),t.$list.append(i("JVC-fail","Not set options.callback",s,r).$root),v(t,r))})})}}(jQuery);
